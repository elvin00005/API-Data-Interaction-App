{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useAlbums } from \"../context/albumsContext\";\nexport const useDeleteAlbumsFromSelect = setSelectedAlbums => {\n  _s();\n  const {\n    setFavoriteAlbums,\n    setAlbums\n  } = useAlbums();\n  console.log({\n    prevAlbums,\n    setFavoriteAlbums\n  });\n  const deleteAlbums = async selectedAlbums => {\n    const albumsToDelete = [...selectedAlbums];\n    console.log(albumsToDelete);\n    const deleteRequests = albumsToDelete.map(albumId => axios.delete(`https://jsonplaceholder.typicode.com/albums/${albumId}`));\n    try {\n      await Promise.all(deleteRequests);\n      setAlbums(prevAlbums => {\n        console.log(\"cl1\");\n        const filtered = prevAlbums.filter(album => !albumsToDelete.includes(album.id));\n        return filtered;\n      });\n      setFavoriteAlbums(prevFavoriteAlbums => {\n        console.log(\"cl2\");\n        const newFavoriteAlbums = prevFavoriteAlbums.filter(albumId => !albumsToDelete.includes(albumId));\n        localStorage.setItem(\"favoriteAlbums\", JSON.stringify(newFavoriteAlbums));\n        return newFavoriteAlbums;\n      });\n      setSelectedAlbums(prevSelectedAlbums => prevSelectedAlbums.filter(albumId => !albumsToDelete.includes(albumId)));\n      toast.success(\"Selected albums removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some albums\");\n    }\n  };\n  return {\n    deleteAlbums\n  };\n};\n_s(useDeleteAlbumsFromSelect, \"VRk6GsrvDs4j5tB5LffAE39tPjM=\", false, function () {\n  return [useAlbums];\n});","map":{"version":3,"names":["axios","toast","useAlbums","useDeleteAlbumsFromSelect","setSelectedAlbums","_s","setFavoriteAlbums","setAlbums","console","log","prevAlbums","deleteAlbums","selectedAlbums","albumsToDelete","deleteRequests","map","albumId","delete","Promise","all","filtered","filter","album","includes","id","prevFavoriteAlbums","newFavoriteAlbums","localStorage","setItem","JSON","stringify","prevSelectedAlbums","success","error"],"sources":["/Users/elvin/Documents/practica/test/src/utilities/hooks/useDeleteAlbumsFromSelect.js"],"sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useAlbums } from \"../context/albumsContext\";\n\nexport const useDeleteAlbumsFromSelect = (setSelectedAlbums) => {\n  const { setFavoriteAlbums, setAlbums } = useAlbums();\n  console.log({ prevAlbums, setFavoriteAlbums });\n  const deleteAlbums = async (selectedAlbums) => {\n    const albumsToDelete = [...selectedAlbums];\n    console.log(albumsToDelete);\n    const deleteRequests = albumsToDelete.map((albumId) =>\n      axios.delete(`https://jsonplaceholder.typicode.com/albums/${albumId}`)\n    );\n    try {\n      await Promise.all(deleteRequests);\n\n      setAlbums((prevAlbums) => {\n        console.log(\"cl1\");\n        const filtered = prevAlbums.filter(\n          (album) => !albumsToDelete.includes(album.id)\n        );\n        return filtered;\n      });\n\n      setFavoriteAlbums((prevFavoriteAlbums) => {\n        console.log(\"cl2\");\n\n        const newFavoriteAlbums = prevFavoriteAlbums.filter(\n          (albumId) => !albumsToDelete.includes(albumId)\n        );\n        localStorage.setItem(\n          \"favoriteAlbums\",\n          JSON.stringify(newFavoriteAlbums)\n        );\n        return newFavoriteAlbums;\n      });\n\n      setSelectedAlbums((prevSelectedAlbums) =>\n        prevSelectedAlbums.filter(\n          (albumId) => !albumsToDelete.includes(albumId)\n        )\n      );\n      toast.success(\"Selected albums removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some albums\");\n    }\n  };\n\n  return { deleteAlbums };\n};\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,SAAS,QAAQ,0BAA0B;AAEpD,OAAO,MAAMC,yBAAyB,GAAIC,iBAAiB,IAAK;EAAAC,EAAA;EAC9D,MAAM;IAAEC,iBAAiB;IAAEC;EAAU,CAAC,GAAGL,SAAS,CAAC,CAAC;EACpDM,OAAO,CAACC,GAAG,CAAC;IAAEC,UAAU;IAAEJ;EAAkB,CAAC,CAAC;EAC9C,MAAMK,YAAY,GAAG,MAAOC,cAAc,IAAK;IAC7C,MAAMC,cAAc,GAAG,CAAC,GAAGD,cAAc,CAAC;IAC1CJ,OAAO,CAACC,GAAG,CAACI,cAAc,CAAC;IAC3B,MAAMC,cAAc,GAAGD,cAAc,CAACE,GAAG,CAAEC,OAAO,IAChDhB,KAAK,CAACiB,MAAM,CAAE,+CAA8CD,OAAQ,EAAC,CACvE,CAAC;IACD,IAAI;MACF,MAAME,OAAO,CAACC,GAAG,CAACL,cAAc,CAAC;MAEjCP,SAAS,CAAEG,UAAU,IAAK;QACxBF,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;QAClB,MAAMW,QAAQ,GAAGV,UAAU,CAACW,MAAM,CAC/BC,KAAK,IAAK,CAACT,cAAc,CAACU,QAAQ,CAACD,KAAK,CAACE,EAAE,CAC9C,CAAC;QACD,OAAOJ,QAAQ;MACjB,CAAC,CAAC;MAEFd,iBAAiB,CAAEmB,kBAAkB,IAAK;QACxCjB,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;QAElB,MAAMiB,iBAAiB,GAAGD,kBAAkB,CAACJ,MAAM,CAChDL,OAAO,IAAK,CAACH,cAAc,CAACU,QAAQ,CAACP,OAAO,CAC/C,CAAC;QACDW,YAAY,CAACC,OAAO,CAClB,gBAAgB,EAChBC,IAAI,CAACC,SAAS,CAACJ,iBAAiB,CAClC,CAAC;QACD,OAAOA,iBAAiB;MAC1B,CAAC,CAAC;MAEFtB,iBAAiB,CAAE2B,kBAAkB,IACnCA,kBAAkB,CAACV,MAAM,CACtBL,OAAO,IAAK,CAACH,cAAc,CAACU,QAAQ,CAACP,OAAO,CAC/C,CACF,CAAC;MACDf,KAAK,CAAC+B,OAAO,CAAC,yBAAyB,CAAC;IAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdhC,KAAK,CAACgC,KAAK,CAAC,8BAA8B,CAAC;IAC7C;EACF,CAAC;EAED,OAAO;IAAEtB;EAAa,CAAC;AACzB,CAAC;AAACN,EAAA,CA7CWF,yBAAyB;EAAA,QACKD,SAAS;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}