{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useFavorite } from \"../context/favoritiesPostsContext\";\nimport useDownloadPosts from \"./useDownloadPosts\";\nimport { toast } from \"react-hot-toast\";\nimport { POST_API } from \"../const/const\";\nexport const useDeletePostsFromFavorities = () => {\n  _s();\n  const {\n    posts,\n    setPosts\n  } = useDownloadPosts();\n  const {\n    favoritePosts,\n    setFavoritePosts\n  } = useFavorite();\n  const deletePost = async selectedPosts => {\n    const postsToDelete = [...selectedPosts];\n    try {\n      const deleteRequests = postsToDelete.map(postId => axios.delete(`${POST_API}/${postId}`));\n      await Promise.all(deleteRequests);\n\n      // Удаление постов из состояния posts\n      setPosts(prevPosts => prevPosts.filter(post => !postsToDelete.includes(post.id)));\n\n      // Удаление постов из состояния favoritePosts\n      setFavoritePosts(prevFavoritePosts => prevFavoritePosts.filter(postId => !postsToDelete.includes(postId)));\n\n      // Обновление локального хранилища\n      localStorage.setItem(\"favoritePosts\", JSON.stringify(favoritePosts.filter(postId => !postsToDelete.includes(postId))));\n      toast.success(\"Selected posts removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some posts\");\n    }\n  };\n  return {\n    deletePost\n  };\n};\n_s(useDeletePostsFromFavorities, \"8RwNFnQXoGUPT1QRqRvC1Ni5DAQ=\", false, function () {\n  return [useDownloadPosts, useFavorite];\n});","map":{"version":3,"names":["axios","useFavorite","useDownloadPosts","toast","POST_API","useDeletePostsFromFavorities","_s","posts","setPosts","favoritePosts","setFavoritePosts","deletePost","selectedPosts","postsToDelete","deleteRequests","map","postId","delete","Promise","all","prevPosts","filter","post","includes","id","prevFavoritePosts","localStorage","setItem","JSON","stringify","success","error"],"sources":["/Users/elvin/Documents/practica/test/src/utilities/hooks/useDeletePostsFromFavorites.js"],"sourcesContent":["import axios from \"axios\";\nimport { useFavorite } from \"../context/favoritiesPostsContext\";\nimport useDownloadPosts from \"./useDownloadPosts\";\nimport { toast } from \"react-hot-toast\";\nimport { POST_API } from \"../const/const\";\n\nexport const useDeletePostsFromFavorities = () => {\n  const { posts, setPosts } = useDownloadPosts();\n  const { favoritePosts, setFavoritePosts } = useFavorite();\n\n  const deletePost = async (selectedPosts) => {\n    const postsToDelete = [...selectedPosts];\n\n    try {\n      const deleteRequests = postsToDelete.map((postId) =>\n        axios.delete(`${POST_API}/${postId}`)\n      );\n\n      await Promise.all(deleteRequests);\n\n      // Удаление постов из состояния posts\n      setPosts((prevPosts) =>\n        prevPosts.filter((post) => !postsToDelete.includes(post.id))\n      );\n\n      // Удаление постов из состояния favoritePosts\n      setFavoritePosts((prevFavoritePosts) =>\n        prevFavoritePosts.filter((postId) => !postsToDelete.includes(postId))\n      );\n\n      // Обновление локального хранилища\n      localStorage.setItem(\n        \"favoritePosts\",\n        JSON.stringify(\n          favoritePosts.filter((postId) => !postsToDelete.includes(postId))\n        )\n      );\n\n      toast.success(\"Selected posts removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some posts\");\n    }\n  };\n\n  return { deletePost };\n};\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,mCAAmC;AAC/D,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,QAAQ,QAAQ,gBAAgB;AAEzC,OAAO,MAAMC,4BAA4B,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChD,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGN,gBAAgB,CAAC,CAAC;EAC9C,MAAM;IAAEO,aAAa;IAAEC;EAAiB,CAAC,GAAGT,WAAW,CAAC,CAAC;EAEzD,MAAMU,UAAU,GAAG,MAAOC,aAAa,IAAK;IAC1C,MAAMC,aAAa,GAAG,CAAC,GAAGD,aAAa,CAAC;IAExC,IAAI;MACF,MAAME,cAAc,GAAGD,aAAa,CAACE,GAAG,CAAEC,MAAM,IAC9ChB,KAAK,CAACiB,MAAM,CAAE,GAAEb,QAAS,IAAGY,MAAO,EAAC,CACtC,CAAC;MAED,MAAME,OAAO,CAACC,GAAG,CAACL,cAAc,CAAC;;MAEjC;MACAN,QAAQ,CAAEY,SAAS,IACjBA,SAAS,CAACC,MAAM,CAAEC,IAAI,IAAK,CAACT,aAAa,CAACU,QAAQ,CAACD,IAAI,CAACE,EAAE,CAAC,CAC7D,CAAC;;MAED;MACAd,gBAAgB,CAAEe,iBAAiB,IACjCA,iBAAiB,CAACJ,MAAM,CAAEL,MAAM,IAAK,CAACH,aAAa,CAACU,QAAQ,CAACP,MAAM,CAAC,CACtE,CAAC;;MAED;MACAU,YAAY,CAACC,OAAO,CAClB,eAAe,EACfC,IAAI,CAACC,SAAS,CACZpB,aAAa,CAACY,MAAM,CAAEL,MAAM,IAAK,CAACH,aAAa,CAACU,QAAQ,CAACP,MAAM,CAAC,CAClE,CACF,CAAC;MAEDb,KAAK,CAAC2B,OAAO,CAAC,wBAAwB,CAAC;IACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd5B,KAAK,CAAC4B,KAAK,CAAC,6BAA6B,CAAC;IAC5C;EACF,CAAC;EAED,OAAO;IAAEpB;EAAW,CAAC;AACvB,CAAC;AAACL,EAAA,CAvCWD,4BAA4B;EAAA,QACXH,gBAAgB,EACAD,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}