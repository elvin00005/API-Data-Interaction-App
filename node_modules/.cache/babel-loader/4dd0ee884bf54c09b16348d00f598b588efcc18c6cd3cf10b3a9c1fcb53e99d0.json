{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useAlbums } from \"../context/albumsContext\";\nexport const useDeleteAlbumsFromSelect = setSelectedAlbums => {\n  // const { setFavoriteAlbums, setAlbums } = useAlbums();\n  const deleteAlbums = async selectedAlbums => {\n    const albumsToDelete = [...selectedAlbums];\n    const deleteRequests = albumsToDelete.map(albumId => axios.delete(`https://jsonplaceholder.typicode.com/albums/${albumId}`));\n    try {\n      await Promise.all(deleteRequests);\n      setAlbums(prevAlbums => {\n        const filtered = prevAlbums.filter(album => !albumsToDelete.includes(album.id));\n        return filtered;\n      });\n      setFavoriteAlbums(prevFavoriteAlbums => {\n        const newFavoriteAlbums = prevFavoriteAlbums.filter(albumId => !albumsToDelete.includes(albumId));\n        localStorage.setItem(\"favoriteAlbums\", JSON.stringify(newFavoriteAlbums));\n        return newFavoriteAlbums;\n      });\n      setSelectedAlbums(prevSelectedAlbums => prevSelectedAlbums.filter(albumId => !albumsToDelete.includes(albumId)));\n      toast.success(\"Selected albums removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some albums\");\n    }\n  };\n  return {\n    deleteAlbums\n  };\n};","map":{"version":3,"names":["axios","toast","useAlbums","useDeleteAlbumsFromSelect","setSelectedAlbums","deleteAlbums","selectedAlbums","albumsToDelete","deleteRequests","map","albumId","delete","Promise","all","setAlbums","prevAlbums","filtered","filter","album","includes","id","setFavoriteAlbums","prevFavoriteAlbums","newFavoriteAlbums","localStorage","setItem","JSON","stringify","prevSelectedAlbums","success","error"],"sources":["/Users/elvin/Documents/practica/test/src/utilities/hooks/useDeleteAlbumsFromSelect.js"],"sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useAlbums } from \"../context/albumsContext\";\n\nexport const useDeleteAlbumsFromSelect = (setSelectedAlbums) => {\n  // const { setFavoriteAlbums, setAlbums } = useAlbums();\n  const deleteAlbums = async (selectedAlbums) => {\n    const albumsToDelete = [...selectedAlbums];\n\n    const deleteRequests = albumsToDelete.map((albumId) =>\n      axios.delete(`https://jsonplaceholder.typicode.com/albums/${albumId}`)\n    );\n    try {\n      await Promise.all(deleteRequests);\n\n      setAlbums((prevAlbums) => {\n        const filtered = prevAlbums.filter(\n          (album) => !albumsToDelete.includes(album.id)\n        );\n        return filtered;\n      });\n\n      setFavoriteAlbums((prevFavoriteAlbums) => {\n        const newFavoriteAlbums = prevFavoriteAlbums.filter(\n          (albumId) => !albumsToDelete.includes(albumId)\n        );\n        localStorage.setItem(\n          \"favoriteAlbums\",\n          JSON.stringify(newFavoriteAlbums)\n        );\n        return newFavoriteAlbums;\n      });\n\n      setSelectedAlbums((prevSelectedAlbums) =>\n        prevSelectedAlbums.filter(\n          (albumId) => !albumsToDelete.includes(albumId)\n        )\n      );\n\n      toast.success(\"Selected albums removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some albums\");\n    }\n  };\n\n  return { deleteAlbums };\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,SAAS,QAAQ,0BAA0B;AAEpD,OAAO,MAAMC,yBAAyB,GAAIC,iBAAiB,IAAK;EAC9D;EACA,MAAMC,YAAY,GAAG,MAAOC,cAAc,IAAK;IAC7C,MAAMC,cAAc,GAAG,CAAC,GAAGD,cAAc,CAAC;IAE1C,MAAME,cAAc,GAAGD,cAAc,CAACE,GAAG,CAAEC,OAAO,IAChDV,KAAK,CAACW,MAAM,CAAE,+CAA8CD,OAAQ,EAAC,CACvE,CAAC;IACD,IAAI;MACF,MAAME,OAAO,CAACC,GAAG,CAACL,cAAc,CAAC;MAEjCM,SAAS,CAAEC,UAAU,IAAK;QACxB,MAAMC,QAAQ,GAAGD,UAAU,CAACE,MAAM,CAC/BC,KAAK,IAAK,CAACX,cAAc,CAACY,QAAQ,CAACD,KAAK,CAACE,EAAE,CAC9C,CAAC;QACD,OAAOJ,QAAQ;MACjB,CAAC,CAAC;MAEFK,iBAAiB,CAAEC,kBAAkB,IAAK;QACxC,MAAMC,iBAAiB,GAAGD,kBAAkB,CAACL,MAAM,CAChDP,OAAO,IAAK,CAACH,cAAc,CAACY,QAAQ,CAACT,OAAO,CAC/C,CAAC;QACDc,YAAY,CAACC,OAAO,CAClB,gBAAgB,EAChBC,IAAI,CAACC,SAAS,CAACJ,iBAAiB,CAClC,CAAC;QACD,OAAOA,iBAAiB;MAC1B,CAAC,CAAC;MAEFnB,iBAAiB,CAAEwB,kBAAkB,IACnCA,kBAAkB,CAACX,MAAM,CACtBP,OAAO,IAAK,CAACH,cAAc,CAACY,QAAQ,CAACT,OAAO,CAC/C,CACF,CAAC;MAEDT,KAAK,CAAC4B,OAAO,CAAC,yBAAyB,CAAC;IAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd7B,KAAK,CAAC6B,KAAK,CAAC,8BAA8B,CAAC;IAC7C;EACF,CAAC;EAED,OAAO;IAAEzB;EAAa,CAAC;AACzB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}