{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useFavorite } from \"../context/favoritiesPostsContext\";\nimport useDownloadPosts from \"./useDownloadPosts\";\nexport const useDeletePostsFromFavorities = setSelectedPosts => {\n  _s();\n  const {\n    posts,\n    setPosts\n  } = useDownloadPosts;\n  const {\n    favoritePosts,\n    setFavoritePosts\n  } = useFavorite();\n  const deletePostsFromFavorities = async selectedPosts => {\n    const postsToDelete = [...selectedPosts];\n    console.log(setSelectedPosts);\n    console.log(\"posts\", posts);\n    console.log(\"postsToDelete\", postsToDelete);\n    console.log(\"favoritePosts\", favoritePosts);\n    const deleteRequests = postsToDelete.map(postId => axios.delete(`https://jsonplaceholder.typicode.com/posts/${postId}`));\n    try {\n      await Promise.all(deleteRequests);\n      setPosts(posts => {\n        posts.filter(post => !postsToDelete.includes(post.id));\n      });\n\n      // setFavoritePosts((favoritePosts) =>\n      //   favoritePosts.filter((postId) => !postsToDelete.includes(postId))\n      // );\n\n      setSelectedPosts(selectedPosts => selectedPosts.filter(postId => !postsToDelete.includes(postId)));\n      localStorage.setItem(\"favoritePosts\", JSON.stringify(favoritePosts));\n      toast.success(\"Selected posts removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some posts\");\n    }\n  };\n  return {\n    deletePostsFromFavorities\n  };\n};\n_s(useDeletePostsFromFavorities, \"HVAb6s/Cem/EXC+GasbqYSZe68Y=\", false, function () {\n  return [useFavorite];\n});","map":{"version":3,"names":["axios","toast","useFavorite","useDownloadPosts","useDeletePostsFromFavorities","setSelectedPosts","_s","posts","setPosts","favoritePosts","setFavoritePosts","deletePostsFromFavorities","selectedPosts","postsToDelete","console","log","deleteRequests","map","postId","delete","Promise","all","filter","post","includes","id","localStorage","setItem","JSON","stringify","success","error"],"sources":["/Users/elvin/Documents/practica/test/src/utilities/hooks/useDeletePostsFromFavorites.js"],"sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\nimport { useFavorite } from \"../context/favoritiesPostsContext\";\nimport useDownloadPosts from \"./useDownloadPosts\";\n\nexport const useDeletePostsFromFavorities = (setSelectedPosts) => {\n  const { posts, setPosts } = useDownloadPosts;\n  const { favoritePosts, setFavoritePosts } = useFavorite();\n  const deletePostsFromFavorities = async (selectedPosts) => {\n    const postsToDelete = [...selectedPosts];\n    console.log(setSelectedPosts);\n    console.log(\"posts\", posts);\n    console.log(\"postsToDelete\", postsToDelete);\n    console.log(\"favoritePosts\", favoritePosts);\n    const deleteRequests = postsToDelete.map((postId) =>\n      axios.delete(`https://jsonplaceholder.typicode.com/posts/${postId}`)\n    );\n    try {\n      await Promise.all(deleteRequests);\n\n      setPosts((posts) => {\n        posts.filter((post) => !postsToDelete.includes(post.id));\n      });\n\n      // setFavoritePosts((favoritePosts) =>\n      //   favoritePosts.filter((postId) => !postsToDelete.includes(postId))\n      // );\n\n      setSelectedPosts((selectedPosts) =>\n        selectedPosts.filter((postId) => !postsToDelete.includes(postId))\n      );\n\n      localStorage.setItem(\"favoritePosts\", JSON.stringify(favoritePosts));\n\n      toast.success(\"Selected posts removed\");\n    } catch (error) {\n      toast.error(\"Failed to delete some posts\");\n    }\n  };\n\n  return { deletePostsFromFavorities };\n};\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,WAAW,QAAQ,mCAAmC;AAC/D,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,OAAO,MAAMC,4BAA4B,GAAIC,gBAAgB,IAAK;EAAAC,EAAA;EAChE,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGL,gBAAgB;EAC5C,MAAM;IAAEM,aAAa;IAAEC;EAAiB,CAAC,GAAGR,WAAW,CAAC,CAAC;EACzD,MAAMS,yBAAyB,GAAG,MAAOC,aAAa,IAAK;IACzD,MAAMC,aAAa,GAAG,CAAC,GAAGD,aAAa,CAAC;IACxCE,OAAO,CAACC,GAAG,CAACV,gBAAgB,CAAC;IAC7BS,OAAO,CAACC,GAAG,CAAC,OAAO,EAAER,KAAK,CAAC;IAC3BO,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,aAAa,CAAC;IAC3CC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEN,aAAa,CAAC;IAC3C,MAAMO,cAAc,GAAGH,aAAa,CAACI,GAAG,CAAEC,MAAM,IAC9ClB,KAAK,CAACmB,MAAM,CAAE,8CAA6CD,MAAO,EAAC,CACrE,CAAC;IACD,IAAI;MACF,MAAME,OAAO,CAACC,GAAG,CAACL,cAAc,CAAC;MAEjCR,QAAQ,CAAED,KAAK,IAAK;QAClBA,KAAK,CAACe,MAAM,CAAEC,IAAI,IAAK,CAACV,aAAa,CAACW,QAAQ,CAACD,IAAI,CAACE,EAAE,CAAC,CAAC;MAC1D,CAAC,CAAC;;MAEF;MACA;MACA;;MAEApB,gBAAgB,CAAEO,aAAa,IAC7BA,aAAa,CAACU,MAAM,CAAEJ,MAAM,IAAK,CAACL,aAAa,CAACW,QAAQ,CAACN,MAAM,CAAC,CAClE,CAAC;MAEDQ,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAACpB,aAAa,CAAC,CAAC;MAEpER,KAAK,CAAC6B,OAAO,CAAC,wBAAwB,CAAC;IACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd9B,KAAK,CAAC8B,KAAK,CAAC,6BAA6B,CAAC;IAC5C;EACF,CAAC;EAED,OAAO;IAAEpB;EAA0B,CAAC;AACtC,CAAC;AAACL,EAAA,CApCWF,4BAA4B;EAAA,QAEKF,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}